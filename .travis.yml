language: node_js
node_js:
         - "8.9.4"

before_install:
        - "docker build --rm -f Dockerfile --build-arg GIT_COMMIT=$LASTEST_TAG -t pxt-container-stm32-iot-node:latest ." 
script:
        - "docker run --rm $DOCKER_USERNAME/pxt-container-stm32-iot-node pxt buildtarget"
        - "docker run --rm $DOCKER_USERNAME/pxt-container-stm32-iot-node pxt testdir tests"
sudo: false
notifications:
   email:
        - kindscript@labaixbidouille.com
cache:
   directories:
        - node_modules
        - built/cache
